"use strict";var __decorate=this&&this.__decorate||function(e,t,o,n){var a,r=arguments.length,i=3>r?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var p=e.length-1;p>=0;p--)(a=e[p])&&(i=(3>r?a(i):r>3?a(t,o,i):a(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i},__metadata=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},core_1=require("@angular/core");require("pdfjs-dist/build/pdf.combined");var PdfViewerComponent=function(){function e(e){this.element=e,this._showAll=!1,this._originalSize=!0,this._page=1,this._zoom=1,this.wasInvalidPage=!1,this.pageChange=new core_1.EventEmitter(!0)}return Object.defineProperty(e.prototype,"src",{set:function(e){this._src=e,this.fn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{set:function(e){e=parseInt(e,10),this._pdf&&(this.isValidPageNumber(e)?(this._page=e,this.renderPage(e),this.wasInvalidPage=!1):isNaN(e)?this.pageChange.emit(null):this.wasInvalidPage||(this.wasInvalidPage=!0,this.pageChange.emit(this._page)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalSize",{set:function(e){this._originalSize=e,this._pdf&&this.fn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAll",{set:function(e){this._showAll=e,this._pdf&&this.fn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoom",{set:function(e){0>=e||(this._zoom=e,this._pdf&&this.fn())},enumerable:!0,configurable:!0}),e.prototype.fn=function(){var e=this;window.PDFJS.getDocument(this._src).then(function(t){return e._pdf=t,e.onLoadComplete&&"function"==typeof e.onLoadComplete&&e.onLoadComplete(t),e.isValidPageNumber(e._page)||(e._page=1),e._showAll?e.renderMultiplePages():e.renderPage(e._page)})},e.prototype.renderMultiplePages=function(){var e=this,t=this.element.nativeElement.querySelector("div"),o=1,n=function(t){return function(){return e.renderPage(t)}};this.removeAllChildNodes(t);var a=this.renderPage(o++);for(o;o<=this._pdf.numPages;o++)a=a.then(n(o))},e.prototype.isValidPageNumber=function(e){return this._pdf.numPages>=e&&e>=1},e.prototype.renderPage=function(e){var t=this;return this._pdf.getPage(e).then(function(e){var o=e.getViewport(t._zoom),n=t.element.nativeElement.querySelector("div"),a=document.createElement("canvas");t._originalSize||(o=e.getViewport(t.element.nativeElement.offsetWidth/o.width)),t._showAll||t.removeAllChildNodes(n),n.appendChild(a),a.height=o.height,a.width=o.width,e.render({canvasContext:a.getContext("2d"),viewport:o})})},e.prototype.removeAllChildNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},__decorate([core_1.Input("on-load-complete"),__metadata("design:type",Function)],e.prototype,"onLoadComplete",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],e.prototype,"src",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],e.prototype,"page",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"pageChange",void 0),__decorate([core_1.Input("original-size"),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],e.prototype,"originalSize",null),__decorate([core_1.Input("show-all"),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],e.prototype,"showAll",null),__decorate([core_1.Input("zoom"),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],e.prototype,"zoom",null),e=__decorate([core_1.Component({selector:"pdf-viewer",template:'<div class="ng2-pdf-viewer-container" [ngClass]="{\'ng2-pdf-viewer--zoom\': _zoom < 1}"></div>',styles:["\n    .ng2-pdf-viewer--zoom {\n        overflow-x: scroll;\n    }"]}),__metadata("design:paramtypes",[core_1.ElementRef])],e)}();exports.PdfViewerComponent=PdfViewerComponent;
//# sourceMappingURL=./dist/pdf-viewer.component.min.js.map