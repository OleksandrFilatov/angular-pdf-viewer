{"version":3,"sources":["pdf-viewer/pdf-viewer.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;YAWA;gBAOE,4BAAoB,OAAmB;oBAAnB,YAAO,GAAP,OAAO,CAAY;oBALf,iBAAY,GAAY,KAAK,CAAC;oBAG9C,iBAAY,GAAW,CAAC,CAAC;gBAES,CAAC;gBAG3C,sBAAI,mCAAG;yBAAP,UAAQ,IAAI;wBACV,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;wBAEjB,IAAI,CAAC,EAAE,EAAE,CAAC;oBACZ,CAAC;;;mBAAA;gBAGD,sBAAI,2CAAW;yBAAf,UAAgB,YAAY;wBAC1B,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;wBAEjC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;4BACtD,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;wBAChC,CAAC;oBACH,CAAC;;;mBAAA;gBAEO,+BAAE,GAAV;oBAAA,iBAUC;oBATC,oBAAK,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,GAAQ;wBACzC,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC;wBAEhB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,iBAAiB,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;4BAC/C,KAAI,CAAC,YAAY,GAAG,CAAC,CAAC;wBACxB,CAAC;wBAED,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC;oBACrC,CAAC,CAAC,CAAC;gBACL,CAAC;gBAEO,8CAAiB,GAAzB,UAA0B,IAAY;oBACpC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,CAAC;gBACjD,CAAC;gBAEO,uCAAU,GAAlB,UAAmB,WAAmB;oBAAtC,iBAkBC;oBAjBC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,IAAS;wBAC5C,IAAI,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;wBACnC,IAAI,MAAM,GAAG,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;wBAChE,IAAI,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;wBAEtC,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC;4BACvB,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;wBACvF,CAAC;wBAED,MAAM,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;wBAChC,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;wBAE9B,IAAI,CAAC,MAAM,CAAC;4BACV,aAAa,EAAE,OAAO;4BACtB,QAAQ,EAAE,QAAQ;yBACnB,CAAC,CAAC;oBACL,CAAC,CAAC,CAAC;gBACL,CAAC;gBAzDD;oBAAC,YAAK,CAAC,eAAe,CAAC;;wEAAA;gBAOvB;oBAAC,YAAK,EAAE;;;6DAAA;gBAOR;oBAAC,YAAK,EAAE;;;qEAAA;gBArBV;oBAAC,gBAAS,CAAC;wBACT,QAAQ,EAAE,YAAY;wBACtB,QAAQ,EAAE,mBAAmB;qBAC9B,CAAC;;sCAAA;gBA8DF,yBAAC;YAAD,CA5DA,AA4DC,IAAA;YA5DD,mDA4DC,CAAA","file":"pdf-viewer/pdf-viewer.component.js","sourcesContent":["/**\n * Created by vadimdez on 21/06/16.\n */\nimport { Component, Input, ElementRef } from '@angular/core';\nimport PDFJS from 'pdfjs-dist';\n\n@Component({\n  selector: 'pdf-viewer',\n  template: '<canvas></canvas>'\n})\n\nexport class PdfViewerComponent {\n\n  @Input('original-size') originalSize: boolean = false;\n  private _src: string;\n  private _pdf: any;\n  private _initialPage: number = 1;\n\n  constructor(private element: ElementRef) {}\n\n  @Input()\n  set src(_src) {\n    this._src = _src;\n\n    this.fn();\n  }\n\n  @Input()\n  set initialPage(_initialPage) {\n    this._initialPage = _initialPage;\n\n    if (this._pdf && this.isValidPageNumber(_initialPage)) {\n      this.renderPage(_initialPage);\n    }\n  }\n\n  private fn() {\n    PDFJS.getDocument(this._src).then((pdf: any) => {\n      this._pdf = pdf;\n\n      if (!this.isValidPageNumber(this._initialPage)) {\n        this._initialPage = 1;\n      }\n\n      this.renderPage(this._initialPage);\n    });\n  }\n\n  private isValidPageNumber(page: number) {\n    return this._pdf.numPages >= page && page >= 1;\n  }\n\n  private renderPage(initialPage: number) {\n    this._pdf.getPage(initialPage).then((page: any) => {\n      var viewport = page.getViewport(1);\n      var canvas = this.element.nativeElement.querySelector('canvas');\n      var context = canvas.getContext('2d');\n\n      if (!this.originalSize) {\n        viewport = page.getViewport(this.element.nativeElement.offsetWidth / viewport.width);\n      }\n\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n\n      page.render({\n        canvasContext: context,\n        viewport: viewport\n      });\n    });\n  }\n}"],"sourceRoot":"/source/"}